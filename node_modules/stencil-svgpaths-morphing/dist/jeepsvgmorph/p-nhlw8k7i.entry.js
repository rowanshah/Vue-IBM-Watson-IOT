import{r as t,h as e,g as i}from"./p-6fdb0e87.js";class s{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return this.x+","+this.y}toFixed(t){return this.x%1==0&&this.y%1==0?this.x+","+this.y:this.x.toFixed(t)+","+this.y.toFixed(t)}fromString(t){let e=t.split(","),i=!1;return 2===e.length&&(this.x=Number(e[0]),this.y=Number(e[1]),i=!0),i}clone(){let t=new s;return t.x=this.x,t.y=this.y,t}multNumber(t){let e=new s;return e.x=this.x*t,e.y=this.y*t,e}multPoint(t){let e=new s;return e.x=this.x*t.x,e.y=this.y*t.y,e}multMatrix(t){let e=new s;return e.x=t[0][0]*this.x+t[0][1]*this.y,e.y=t[1][0]*this.x+t[1][1]*this.y,e}addPoint(t){let e=new s;return e.x=this.x+t.x,e.y=this.y+t.y,e}substractPoint(t){let e=new s;return e.x=this.x-t.x,e.y=this.y-t.y,e}middlePoint(t){let e=new s;return e.x=(this.x+t.x)/2,e.y=(this.y+t.y)/2,e}distance(t){let e=new s;return e.x=t.x-this.x,e.y=t.y-this.y,e}dotProduct(t,e){return(e.x-this.x)*(t.x-this.x)+(e.y-this.y)*(t.y-this.y)}isPointOnLine(t,e){let i=!1,s=this.scalarDistance(t),n=this.dotProduct(t,e)/(s*s),r=this.addPoint(t.substractPoint(this).multNumber(n)).scalarDistance(e);return Math.abs(r)<1e-4&&(i=!0),i}scalarDistance(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))}atDistancePoint(t,e){let i=this.distance(t).multNumber(e);return this.addPoint(i)}}class n{constructor(t=null){null!=t&&(this._size=t,this.zeros())}set size(t){this._size=t,this.zeros()}get size(){return this._size}zeros(){let t,e=[];switch("number"==typeof this._size&&(t=1),this._size instanceof Array&&(t=this._size.length),t){case 1:let i=this._size instanceof Array?this._size[0]:this._size;for(let t=0;t<i;t++)e=[...e,0];break;case 2:for(let t=0;t<this._size[0];t++){let t=[];for(let e=0;e<this._size[1];e++)t=[...t,0];e=[...e,t]}break;default:e=[]}this.matrix=e}identity(){let t,e=[];switch("number"==typeof this._size&&(t=1),this._size instanceof Array&&(t=this._size.length),t){case 1:let i=this._size instanceof Array?this._size[0]:this._size;for(let t=0;t<i;t++)e=0===t?[...e,1]:[...e,0];break;case 2:for(let t=0;t<this._size[0];t++){let i=[];for(let e=0;e<this._size[1];e++)i=t===e?[...i,1]:[...i,0];e=[...e,i]}break;default:e=[]}this.matrix=e}clone(){let t,e=new n(this._size),i=[];switch("number"==typeof this._size&&(t=1),this._size instanceof Array&&(t=this._size.length),t){case 1:let e=this._size instanceof Array?this._size[0]:this._size;for(let t=0;t<e;t++)i=[...i,this.matrix[t]];break;case 2:for(let t=0;t<this._size[0];t++)i=[...i,this.matrix[t]];break;default:i=[]}return e.matrix=i,e}circularPermuteRow(t){let e,i=t.index?t.index:null,s=!!t.rowIndex&&t.rowIndex,n=[];switch("number"==typeof this._size&&(e=1),this._size instanceof Array&&(e=this._size.length),e){case 1:let t=this._size instanceof Array?this._size[0]:this._size;for(let e=0;e<t;e++)n=[...n,this.matrix[e]];let r=null!=i?i:0;for(;r>0;){let t=n.shift();n=[...n,t],r--}break;case 2:for(let t=0;t<this._size[0];t++)n=[...n,this.matrix[t]];for(let t=0;t<this._size[0]-1;t++){let e=s&&this._size[0]===this._size[1]?t+1:null!=i?i:0;for(;e>0;){let i=n[t].shift();n[t]=[...n[t],i],e--}}break;default:n=[]}this.matrix=n}flipRow(){let t=[],e=this._size instanceof Array?this._size[0]:this._size;for(let i=0;i<e;i++)t=[...t,this.matrix[i]];this.matrix=t.reverse()}multiply(t){let e,i,s,r;if("number"==typeof this._size?(e=this._size,i="number"==typeof t.size?t.size:t.size[0]?t.size[0]:null,s=t.size[1]?null:1):(e=this._size[0],i=t.size[1]?t.size[1]:t.size[0]?t.size[0]:t.size,s=(r=t.size[1]?t.size[0]:1)===(s=this._size[1]?this._size[1]:1)?s:null),null===e||null===i||null===s)return null;let l=new n([e,i]);if(l.zeros(),1===s){let s=this.matrix,n=t.matrix;for(let t=0;t<e;t++)for(let e=0;e<i;e++)l.matrix[t][e]=l.matrix[t][e]+s[t]*n[e]}else for(let n=0;n<e;n++)for(let e=0;e<i;e++)for(let i=0;i<s;i++)l.matrix[n][e]=l.matrix[n][e]+this.matrix[n][i]*t.matrix[i][e];return l}multiplyByVectorPoints(t){let e=[],i=this.matrix;if("number"==typeof this._size){if(this._size!=t.length)return null;e[0]=new s;for(let s=0;s<this._size;s++)e[0]=e[0].addPoint(t[s].multNumber(i[s]))}else{let n=this._size[1]?this._size[0]:1,r=this._size[1]?this._size[1]:this._size[0];if(r!=t.length)return null;for(let l=0;l<n;l++){e[l]=new s;for(let s=0;s<r;s++)e[l]=e[l].addPoint(t[s].multNumber(i[l][s]))}}return e}}function r(t){return t.toUpperCase()!=t.toLowerCase()}function l(t,e){let i={},s=t[0].isPointOnLine(t[3],t[1]),r=t[0].isPointOnLine(t[3],t[2]);if(s&&r){i.C1=[],i.C2=[],i.C1=[...i.C1,t[0]];let s=t[0].addPoint(t[3].substractPoint(t[0]).multNumber(e)),n=t[0].addPoint(s.substractPoint(t[0]).multNumber(1/3)),r=t[0].addPoint(s.substractPoint(t[0]).multNumber(2/3));i.C1=[...i.C1,n],i.C1=[...i.C1,r],i.C1=[...i.C1,s],i.C2=[...i.C2,s],n=s.addPoint(t[3].substractPoint(s).multNumber(1/3)),r=s.addPoint(t[3].substractPoint(s).multNumber(2/3)),i.C2=[...i.C2,n],i.C2=[...i.C2,r],i.C2=[...i.C2,t[3]]}else{let s=new n([4,4]);s.identity();let r=e-1;s.matrix[1][0]=-r,s.matrix[2][0]=r*r,s.matrix[3][0]=-r*r*r,s.matrix[1][1]=e,s.matrix[2][1]=-2*r*e,s.matrix[3][1]=3*r*r*e,s.matrix[2][2]=e*e,s.matrix[3][2]=-3*r*e*e,s.matrix[3][3]=e*e*e,i.C1=s.multiplyByVectorPoints(t),s.circularPermuteRow({rowIndex:!0}),s.flipRow(),i.C2=s.multiplyByVectorPoints(t)}return i}function h(t){let e="";for(let i=0;i<t.length-1;i+=3)0===i&&(e=e.concat("M ").concat(t[i].toFixed(2)).concat(" ")),e=(e=(e=e.concat("C ").concat(t[i+1].toFixed(2)).concat(" ")).concat(t[i+2].toFixed(2)).concat(" ")).concat(t[i+3].toFixed(2)).concat(" ");return e.trim()}function a(t,e,i,s){let n=[];return n=[...n,t],n=[...n,e],n=[...n,i],[...n,s]}function o(t){const e=t.cBz.split("C");let i=[];for(let t=0;t<e.length;t++){0===t&&"M"===e[t].charAt(0)&&(e[t]=e[t].slice(1));let n=e[t].trim().split(" ");if(n.length>0)for(let t=0;t<n.length;t++){let e=new s;e.fromString(n[t])&&(i=[...i,e])}}return i}function c(t,e){let i=[];return h(i=function(t,e){let i=t,s=[];if(e>0)for(let t=0;t<e;t++){i.splice(0,1);for(let t=0;t<2;t++)s=i.shift(),i=[...i,s];s=i[0],i=[...i,s]}else for(let t=0;t<Math.abs(e);t++){i.splice(-1);for(let t=0;t<2;t++)i.splice(0,0,i.splice(-1)[0]);i.splice(0,0,i[i.length-1])}return i}(t,e))}function u(t,e,i,s){let n=t.scalarDistance(s);return(t.scalarDistance(e)+e.scalarDistance(i)+i.scalarDistance(s)+n)/2}function x(t,e,i){let s=t,n=e,r=s.slice(-1)[0];for(let t=0;t<i;t++)s=[...s,r],s=[...s,r],s=[...s,r],n=[...n,0];return{points:s,segLength:n}}function m(t,e){let i={};if(i.index=t.index,i.startIndex=t.startIndex,i.oriCBz=t.oriCBz,i.tLength=t.tLength,i.cLength=[],e/t.cLength.length<1)return Promise.resolve(null);let s,n=Math.floor(e/t.cLength.length),r=e%t.cLength.length;return n>1?(s=function(t,e){let i=[],s=[],n=[];if(i=o(t),e>1){for(let t=0;t<i.length-1;t+=3){let r=e;0===t&&(n=[...n,i[t]]);let h=a(i[t],i[t+1],i[t+2],i[t+3]);for(;r>1;){let t=1/r,e=l(a(h[0],h[1],h[2],h[3]),t);n=[...n,e.C1[1]],n=[...n,e.C1[2]],n=[...n,e.C1[3]],s=[...s,u(e.C1[0],e.C1[1],e.C1[2],e.C1[3])],1==--r?(n=[...n,e.C2[1]],n=[...n,e.C2[2]],n=[...n,e.C2[3]],s=[...s,u(e.C2[0],e.C2[1],e.C2[2],e.C2[3])]):h=a(e.C2[0],e.C2[1],e.C2[2],e.C2[3])}}i=n}return{points:i,segLength:s}}(t,n),r>0&&(s=x(s.points,s.segLength,r))):((s={}).points=o(t),s.segLength=t.cLength,r>0&&(s=x(s.points,s.segLength,r))),i.cLength=s.segLength,i.cBz=0!=t.startIndex?c(s.points,t.startIndex):h(s.points),Promise.resolve(i)}async function p(t,e){let i={index:0};if(i.startIndex=e||0,i.cBz="",i.oriCBz="",i.cType="",i.lPoint=new s,i.cLength=[],i.tLength=0,t.length>0&&r(t.charAt(0))&&"M"===t.charAt(0).toUpperCase()){let e=t.trim().replace(/([A-Za-z](?!$))/g," $1 ").trim().replace(/([\-](?!$))/g," $1").split(/[ ,]+/);for(i.index=3,i.lPoint.x=Number(e[1]),i.lPoint.y=Number(e[2]),i.cBz=i.cBz.concat("M "),i.cBz=i.cBz.concat(i.lPoint.toFixed(2)+" ");i.index<e.length;){let t=!1;switch(r(e[i.index].charAt(0))&&(i.cType=e[i.index].charAt(0),t=!0),i.cType.toUpperCase()){case"H":case"V":case"L":i=await d(i,e,t);break;case"Q":i=await g(i,e,t);break;case"C":i=await y(i,e,t);break;case"Z":i.cBz=i.cBz.concat("Z")}}}return i.cBz=i.cBz.trim(),i.oriCBz=i.cBz,Promise.resolve(i)}function d(t,e,i){let n=t,r=new s,l=new s;if(i)switch(n.cType.toUpperCase()){case"H":r.x=Number(e[n.index+1]),r.y=n.lPoint.y,n.index+=2;break;case"V":r.y=Number(e[n.index+1]),r.x=n.lPoint.x,n.index+=2;break;case"L":r.x=Number(e[n.index+1]),r.y=Number(e[n.index+2]),n.index+=3}else"L"===n.cType.toUpperCase()&&(r.x=Number(e[n.index]),r.y=Number(e[n.index+1]),n.index+=2);"l"===n.cType?(l.x=n.lPoint.x+r.x,l.y=n.lPoint.y+r.y):"h"===n.cType?(l.x=n.lPoint.x+r.x,l.y=n.lPoint.y):"v"===n.cType?(l.y=n.lPoint.y+r.y,l.x=n.lPoint.x):l=r,n.cBz=n.cBz.concat("C "),n.cBz=n.cBz.concat(n.lPoint.atDistancePoint(l,1/3).toFixed(2)+" "),n.cBz=n.cBz.concat(n.lPoint.atDistancePoint(l,2/3).toFixed(2)+" "),n.cBz=n.cBz.concat(l.toFixed(2)+" ");let h=n.lPoint.scalarDistance(l);return n.cLength=[...n.cLength,h],n.tLength+=h,n.lPoint=l,Promise.resolve(n)}function g(t,e,i){let n=t,r=new s,l=new s,h=new s,a=new s;i?(r.x=Number(e[n.index+1]),r.y=Number(e[n.index+2]),l.x=Number(e[n.index+3]),l.y=Number(e[n.index+4]),n.index+=5):(r.x=Number(e[n.index]),r.y=Number(e[n.index+1]),l.x=Number(e[n.index+2]),l.y=Number(e[n.index+3]),n.index+=4),"q"===n.cType?(h.x=n.lPoint.x+r.x,h.y=n.lPoint.y+r.y,a.x=n.lPoint.x+l.x,a.y=n.lPoint.y+l.y):(h=r,a=l),n.cBz=n.cBz.concat("C ");const o=n.lPoint.addPoint(h.substractPoint(n.lPoint).multNumber(2/3));n.cBz=n.cBz.concat(o.toFixed(2)+" ");const c=a.addPoint(h.substractPoint(a).multNumber(2/3));n.cBz=n.cBz.concat(c.toFixed(2)+" "),n.cBz=n.cBz.concat(a.toFixed(2)+" ");let u=n.lPoint.scalarDistance(a),x=n.lPoint.scalarDistance(o)+o.scalarDistance(c)+c.scalarDistance(a);return n.cLength=[...n.cLength,(x+u)/2],n.tLength+=(x+u)/2,n.lPoint=a,Promise.resolve(n)}function y(t,e,i){let n=t,r=new s,l=new s,h=new s,a=new s,o=new s,c=new s;i?(r.x=Number(e[n.index+1]),r.y=Number(e[n.index+2]),l.x=Number(e[n.index+3]),l.y=Number(e[n.index+4]),h.x=Number(e[n.index+5]),h.y=Number(e[n.index+6]),n.index+=7):(r.x=Number(e[n.index]),r.y=Number(e[n.index+1]),l.x=Number(e[n.index+2]),l.y=Number(e[n.index+3]),h.x=Number(e[n.index+4]),h.y=Number(e[n.index+5]),n.index+=6),"c"===n.cType?(a.x=n.lPoint.x+r.x,a.y=n.lPoint.y+r.y,o.x=n.lPoint.x+l.x,o.y=n.lPoint.y+l.y,c.x=n.lPoint.x+h.x,c.y=n.lPoint.y+h.y):(a=r,o=l,c=h),n.cBz=n.cBz.concat("C "),n.cBz=n.cBz.concat(a.toFixed(2)+" "),n.cBz=n.cBz.concat(o.toFixed(2)+" "),n.cBz=n.cBz.concat(c.toFixed(2)+" ");let x=u(n.lPoint,a,o,c);return n.cLength=[...n.cLength,x],n.tLength+=x,n.lPoint=c,Promise.resolve(n)}class _{constructor(e){t(this,e),this.duration="2000ms",this.calcmode="linear",this._alignPathList=[],this._cBList=[],this._valuesPath="",this._valuesFill="",this._isUniqueColor=!1}parseDurationProp(t){this.innerDuration=t||"2000ms"}parseRepeatcountProp(t){this.innerRepeatcount=t||null}parsePathindexProp(t){this.innerPathindex=t?this._removeCarriageReturn(t).split(";").map(Number):null}parseNsegmentProp(t){this.innerNsegment=t?Number(t):null}parseKeytimesProp(t){this.innerKeytimes=t?this._removeCarriageReturn(t):null}parseCalcmodeProp(t){this.innerCalcmode=t||"linear"}parseKeysplinesProp(t){this.innerKeysplines=t?this._removeCarriageReturn(t):null}parseFillProp(t){this.innerFill=t||null}async init(){return await this._init()}async getStateProperties(){const t={};return t.duration=this.innerDuration,t.repeatCount=this.innerRepeatcount,t.pathIndex=this.innerPathindex,t.nSegment=this.innerNsegment,t.keyTimes=this.innerKeytimes,t.calcMode=this.innerCalcmode,t.keySplines=this.innerKeysplines,t.fill=this.innerFill,t}async getPath(){return this._getPath()}async getPathList(){return this._pathList}async getFillColor(){return this._fillColor}renderSVGFirstPath(){return this._renderSVGFirstPath()}async getAlignedPaths(t){return t&&await this._alignPaths(),this._alignPathList}async componentWillLoad(){await this.init()}async componentDidLoad(){this._element=this.el.shadowRoot,this.isSVG&&await this._renderSVGFirstPath()}async _init(){this.parseDurationProp(this.duration?this.duration:"2000ms"),this.parsePathindexProp(this.pathindex?this.pathindex:null),this.parseNsegmentProp(this.nsegment?this.nsegment:null),this.parseRepeatcountProp(this.repeatcount?this.repeatcount:null),this.parseFillProp(this.fill?this.fill:null),this.parseKeytimesProp(this.keytimes?this.keytimes:null),this.parseCalcmodeProp(this.calcmode?this.calcmode:"linear"),this.parseKeysplinesProp(this.keysplines?this.keysplines:null),null!=this.innerFill&&(this._uniqueColor=this.innerFill,this._isUniqueColor=!0),await this.getPath()}_removeCarriageReturn(t){let e=t.split(/\r?\n|\r/g),i=t;if(e.length>1){i="";for(let t=0;t<e.length;t++)i=i.concat(" "+e[t].trim())}return i}_setSVGAttributes(){this._svgOptions.width&&this._svg.setAttribute("width",this._svgOptions.width),this._svgOptions.height&&this._svg.setAttribute("height",this._svgOptions.height),this._svgOptions.viewBox&&this._svg.setAttribute("viewBox",this._svgOptions.viewBox),this._svgOptions.xmlns&&this._svg.setAttribute("xmlns",this._svgOptions.xmlns)}_drawFirstPath(){this._path=this._svg.querySelector("#initPath"),this._path.setAttribute("d",this._pathList[0]),this._fillColor.length>0&&this._path.setAttribute("fill",this._fillColor[0])}async _getPath(){const t=this.el.querySelector("svg");if(this.isSVG=!1,null!==t){this._svgOptions={},this._pathList=[],this._fillColor=[];let e=t.getAttribute("width"),i=t.getAttribute("height"),s=t.getAttribute("viewBox"),n=t.getAttribute("xmlns");if(this._svgOptions.width=e||!1,this._svgOptions.height=i||!1,this._svgOptions.viewBox=s||!1,this._svgOptions.xmlns=n||!1,t.childElementCount>0)for(let e=0;e<t.childElementCount;e++){let i=t.children[e].getAttribute("d"),s=i.split(/\r?\n|\r/g);if(s.length>1){let t="";for(let e=0;e<s.length;e++)t=t.concat(" "+s[e].trim());this._pathList=[...this._pathList,t.trim()]}else this._pathList=[...this._pathList,i];const n=t.children[e].getAttribute("fill");null==n||this._isUniqueColor||(this._fillColor=[...this._fillColor,n])}await this.getOccurrence(this._fillColor,this._fillColor[0])===this._fillColor.length&&(this._isUniqueColor=!0,this._uniqueColor=this._fillColor[0]),this.el.removeChild(t);let r=null!=this.innerKeytimes?this.innerKeytimes.split(";").length:0,l=null!=this.innerKeysplines?this.innerKeysplines.split(";").length:0,h=0===r||r===this._pathList.length;("spline"!==this.innerCalcmode||l==r-1)&&h&&(this.isSVG=!0)}}async _alignPaths(){let t;for(let e=0;e<this._pathList.length;e++){t=null!=this.innerPathindex&&this.innerPathindex[e]?this.innerPathindex[e]:0;const i=await p(this._pathList[e],t);this._cBList=[...this._cBList,i]}this._alignPathList=await async function(t,e){let i=[],s=function(t){let e=0,i=t[0].cLength.length;for(let s=1;s<t.length;s++)t[s].cLength.length>i&&(e=s,i=t[s].cLength.length);return{idx:e,segMax:i}}(t),n=e&&null!=e&&e>t[s.idx].cLength.length?e:t[s.idx].cLength.length;for(let e=0;e<t.length;e++)if(n>t[e].cLength.length){let s=await m(t[e],n);i=[...i,s]}else{if(0!=t[e].startIndex){let i=c(o(t[e]),t[e].startIndex);t[e].cBz=i}i=[...i,t[e]]}return Promise.resolve(i)}(this._cBList,this.innerNsegment)}_setAnimation(){let t=this._path.querySelector("#animPath");this._valuesPath="";for(let t=0;t<this._alignPathList.length;t++)null!=this._alignPathList[t].cBz&&(this._valuesPath=this._valuesPath.concat(this._alignPathList[t].cBz+";"));if(t.setAttribute("attributeName","d"),t.setAttribute("values",this._valuesPath),t.setAttribute("dur",this.innerDuration),t.setAttribute("xlink:href","#initPath"),null!=this.innerFill&&t.setAttribute("fill",this.innerFill),null!=this.innerRepeatcount&&t.setAttribute("repeatCount",this.innerRepeatcount),null!=this.innerKeytimes&&t.setAttribute("keyTimes",this.innerKeytimes),t.setAttribute("calcMode",this.innerCalcmode),null!=this.innerKeysplines&&t.setAttribute("keySplines",this.innerKeysplines),this._fillColor.length>1&&!this._isUniqueColor){let e=this._path.querySelector("#animFill");this._valuesFill="";for(let t=0;t<this._fillColor.length;t++)null!=this._alignPathList[t].cBz&&(this._valuesFill=this._valuesFill.concat(this._fillColor[t]+";"));e.setAttribute("attributeName","fill"),e.setAttribute("values",this._valuesFill),e.setAttribute("dur",this.innerDuration),e.setAttribute("xlink:href","#initPath"),null!=this.innerFill&&e.setAttribute("fill",this.innerFill),null!=this.innerRepeatcount&&e.setAttribute("repeatCount",this.innerRepeatcount),null!=this.innerKeytimes&&t.setAttribute("keyTimes",this.innerKeytimes),t.setAttribute("calcMode",this.innerCalcmode),null!=this.innerKeysplines&&t.setAttribute("keySplines",this.innerKeysplines)}}async getOccurrence(t,e){return t.filter(t=>t===e).length}async _renderSVGFirstPath(){return this._container=this._element.querySelector("#morph-container"),this._svg=this._container.querySelector("#morph-svg"),this._setSVGAttributes(),this._pathList&&this._pathList[0]&&(this._drawFirstPath(),await this._alignPaths(),this._setAnimation()),Promise.resolve()}render(){return this.isSVG?e("div",{id:"morph-container"},e("div",{id:"morph-svg-container"},e("svg",{id:"morph-svg",width:"500",height:"500",viewBox:"0 0 500 500",xmlns:"http://www.w3.org/2000/svg"},e("path",{id:"initPath"},e("animate",{id:"animPath",begin:"initPath.click"}),this._fillColor.length>1&&!this._uniqueColor?e("animate",{id:"animFill",begin:"animPath.begin"}):null)))):e("div",{id:"fake-container"})}get el(){return i(this)}static get watchers(){return{duration:["parseDurationProp"],repeatcount:["parseRepeatcountProp"],pathindex:["parsePathindexProp"],nsegment:["parseNsegmentProp"],keytimes:["parseKeytimesProp"],calcmode:["parseCalcmodeProp"],keysplines:["parseKeysplinesProp"],fill:["parseFillProp"]}}static get style(){return":host{--height:500px;--width:500px;--top:30px;--left:10px}#morph-container{position:relative;left:0;top:0;width:100%;height:calc(var(--height) + var(--top))}#morph-svg-container{position:relative;left:var(--left);top:var(--top);width:var(--width);height:var(--height)}svg{width:100%;height:100%}"}}export{_ as jeep_svgmorph};