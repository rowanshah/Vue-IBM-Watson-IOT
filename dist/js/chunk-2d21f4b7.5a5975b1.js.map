{"version":3,"sources":["webpack:///./node_modules/@ionic/core/dist/esm/legacy/tap-click-c672ad5e.js"],"names":["__webpack_require__","r","__webpack_exports__","d","startTapClick","_chunk_c90aaa66_js__WEBPACK_IMPORTED_MODULE_0__","config","scrollingEl","activatableEle","activeRipple","activeDefer","lastTouch","MOUSE_WAIT","lastActivated","useRippleEffect","getBoolean","clearDefers","WeakMap","isScrolling","undefined","parentElement","onTouchStart","ev","Object","pointerDown","onTouchEnd","pointerUp","onMouseDown","t","onMouseUp","cancelActive","clearTimeout","removeActivated","setActivatedElement","getActivatableTarget","el","_a","x","y","has","Error","classList","contains","ACTIVATED","addActivated","deferId","get","delete","delay","isInstant","ADD_ACTIVATED_DEFERS","remove","setTimeout","Date","now","add","rippleEffect","getRippleEffect","addRipple","smooth","then","active","time","CLEAR_STATE_DEFERS","set","doc","document","addEventListener","target","composedPath","closest","path","i","length","shadowRoot","ripple","querySelector"],"mappings":"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","file":"js/chunk-2d21f4b7.5a5975b1.js","sourcesContent":["import { n as now, p as pointerCoord } from './chunk-c90aaa66.js';\nvar startTapClick = function (config) {\n    var lastTouch = -MOUSE_WAIT * 10;\n    var lastActivated = 0;\n    var scrollingEl;\n    var activatableEle;\n    var activeRipple;\n    var activeDefer;\n    var useRippleEffect = config.getBoolean('animated', true) && config.getBoolean('rippleEffect', true);\n    var clearDefers = new WeakMap();\n    var isScrolling = function () {\n        return scrollingEl !== undefined && scrollingEl.parentElement !== null;\n    };\n    // Touch Events\n    var onTouchStart = function (ev) {\n        lastTouch = now(ev);\n        pointerDown(ev);\n    };\n    var onTouchEnd = function (ev) {\n        lastTouch = now(ev);\n        pointerUp(ev);\n    };\n    var onMouseDown = function (ev) {\n        var t = now(ev) - MOUSE_WAIT;\n        if (lastTouch < t) {\n            pointerDown(ev);\n        }\n    };\n    var onMouseUp = function (ev) {\n        var t = now(ev) - MOUSE_WAIT;\n        if (lastTouch < t) {\n            pointerUp(ev);\n        }\n    };\n    var cancelActive = function () {\n        clearTimeout(activeDefer);\n        activeDefer = undefined;\n        if (activatableEle) {\n            removeActivated(false);\n            activatableEle = undefined;\n        }\n    };\n    var pointerDown = function (ev) {\n        if (activatableEle || isScrolling()) {\n            return;\n        }\n        scrollingEl = undefined;\n        setActivatedElement(getActivatableTarget(ev), ev);\n    };\n    var pointerUp = function (ev) {\n        setActivatedElement(undefined, ev);\n    };\n    var setActivatedElement = function (el, ev) {\n        // do nothing\n        if (el && el === activatableEle) {\n            return;\n        }\n        clearTimeout(activeDefer);\n        activeDefer = undefined;\n        var _a = pointerCoord(ev), x = _a.x, y = _a.y;\n        // deactivate selected\n        if (activatableEle) {\n            if (clearDefers.has(activatableEle)) {\n                throw new Error('internal error');\n            }\n            if (!activatableEle.classList.contains(ACTIVATED)) {\n                addActivated(activatableEle, x, y);\n            }\n            removeActivated(true);\n        }\n        // activate\n        if (el) {\n            var deferId = clearDefers.get(el);\n            if (deferId) {\n                clearTimeout(deferId);\n                clearDefers.delete(el);\n            }\n            var delay = isInstant(el) ? 0 : ADD_ACTIVATED_DEFERS;\n            el.classList.remove(ACTIVATED);\n            activeDefer = setTimeout(function () {\n                addActivated(el, x, y);\n                activeDefer = undefined;\n            }, delay);\n        }\n        activatableEle = el;\n    };\n    var addActivated = function (el, x, y) {\n        lastActivated = Date.now();\n        el.classList.add(ACTIVATED);\n        var rippleEffect = useRippleEffect && getRippleEffect(el);\n        if (rippleEffect && rippleEffect.addRipple) {\n            activeRipple = rippleEffect.addRipple(x, y);\n        }\n    };\n    var removeActivated = function (smooth) {\n        if (activeRipple !== undefined) {\n            activeRipple.then(function (remove) { return remove(); });\n        }\n        var active = activatableEle;\n        if (!active) {\n            return;\n        }\n        var time = CLEAR_STATE_DEFERS - Date.now() + lastActivated;\n        if (smooth && time > 0 && !isInstant(active)) {\n            var deferId = setTimeout(function () {\n                active.classList.remove(ACTIVATED);\n                clearDefers.delete(active);\n            }, CLEAR_STATE_DEFERS);\n            clearDefers.set(active, deferId);\n        }\n        else {\n            active.classList.remove(ACTIVATED);\n        }\n    };\n    var doc = document;\n    doc.addEventListener('ionScrollStart', function (ev) {\n        scrollingEl = ev.target;\n        cancelActive();\n    });\n    doc.addEventListener('ionScrollEnd', function () {\n        scrollingEl = undefined;\n    });\n    doc.addEventListener('ionGestureCaptured', cancelActive);\n    doc.addEventListener('touchstart', onTouchStart, true);\n    doc.addEventListener('touchcancel', onTouchEnd, true);\n    doc.addEventListener('touchend', onTouchEnd, true);\n    doc.addEventListener('mousedown', onMouseDown, true);\n    doc.addEventListener('mouseup', onMouseUp, true);\n};\nvar getActivatableTarget = function (ev) {\n    if (ev.composedPath) {\n        var path = ev.composedPath();\n        for (var i = 0; i < path.length - 2; i++) {\n            var el = path[i];\n            if (el.classList && el.classList.contains('ion-activatable')) {\n                return el;\n            }\n        }\n    }\n    else {\n        return ev.target.closest('.ion-activatable');\n    }\n};\nvar isInstant = function (el) {\n    return el.classList.contains('ion-activatable-instant');\n};\nvar getRippleEffect = function (el) {\n    if (el.shadowRoot) {\n        var ripple = el.shadowRoot.querySelector('ion-ripple-effect');\n        if (ripple) {\n            return ripple;\n        }\n    }\n    return el.querySelector('ion-ripple-effect');\n};\nvar ACTIVATED = 'activated';\nvar ADD_ACTIVATED_DEFERS = 200;\nvar CLEAR_STATE_DEFERS = 200;\nvar MOUSE_WAIT = 2500;\nexport { startTapClick };\n"],"sourceRoot":""}